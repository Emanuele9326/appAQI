function asyncGeneratorStep(t,e,n,o,a,r,c){try{var i=t[r](c),m=i.value}catch(t){return void n(t)}i.done?e(m):Promise.resolve(m).then(o,a)}function _asyncToGenerator(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var r=t.apply(e,n);function c(t){asyncGeneratorStep(r,o,a,c,i,"next",t)}function i(t){asyncGeneratorStep(r,o,a,c,i,"throw",t)}c(void 0)}))}}import"../CSS/app.css";var latlng=[42.638426,12.674297],mymap=L.map("myMap").setView(latlng,3);L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZW1hbnVlbGVtYXJyYTkzIiwiYSI6ImNrbXg5c25jczBtdWMycHFzcTc1N2RzYnoifQ.oCOb1P_vTp2jdYczVeVBXQ",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"your.mapbox.access.token"}).addTo(mymap);var marker=L.marker(latlng).addTo(mymap),aqi=document.getElementById("cityAQI");aqi.addEventListener("click",_asyncToGenerator(regeneratorRuntime.mark((function t(){var e,n,o,a,r,c,i,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==document.getElementById("city").value.length){t.next=6;break}console.log("city ​​not entered"),alert("Enter city eg: Livorno --- or use the Geolocation button"),t.next=25;break;case 6:return e=document.getElementById("city").value,n="aqi/".concat(e),t.next=10,fetch(n).then((function(t){return t.json()})).catch((function(t){return console.error(t)}));case 10:return o=t.sent,a=o.results[0].locations[0].displayLatLng.lat,console.log(a),r=o.results[0].locations[0].displayLatLng.lng,console.log(r),c="geo/".concat(a,",").concat(r),t.next=18,fetch(c).then((function(t){return t.json()})).catch((function(t){return console.error(t)}));case 18:i=t.sent,mymap.setView(new L.LatLng(a,r),12),m=new L.LatLng(a,r),marker.setLatLng(m),void 0===i.data.aqi?(document.getElementById("aqi").textContent="AQI = --",console.log("survey station not present or value not detected")):document.getElementById("aqi").textContent="AQI = ".concat(i.data.aqi),void 0===i.data.iaqi.pm10?(document.getElementById("pm10").textContent="pm10 = --",console.log("pm10 value not detected")):document.getElementById("pm10").textContent="pm10 = ".concat(i.data.iaqi.pm10.v," µg/m^3"),void 0===i.data.iaqi.pm25?(document.getElementById("pm25").textContent="pm25 = --",console.log("pm25 value not detected")):document.getElementById("pm25").textContent="pm25 = ".concat(i.data.iaqi.pm25.v," µg/m^3");case 25:case"end":return t.stop()}}),t)}))));var geoloco=document.getElementById("geoloc");geoloco.addEventListener("click",_asyncToGenerator(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(){return(n=_asyncToGenerator(regeneratorRuntime.mark((function t(e){var n,o,a,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.coords.latitude,o=e.coords.longitude,a="geo/".concat(n,",").concat(o),t.next=5,fetch(a).then((function(t){return t.json()})).catch((function(t){return console.error(t)}));case 5:r=t.sent,mymap.setView(new L.LatLng(n,o),16),c=new L.LatLng(n,o),marker.setLatLng(c),void 0===r.data.aqi?(document.getElementById("aqi").textContent="AQI = --",console.log("survey station not present or value not detected")):document.getElementById("aqi").textContent="AQI = ".concat(r.data.aqi),void 0===r.data.iaqi.pm10?(document.getElementById("pm10").textContent="pm10 = --",console.log("pm10 value not detected")):document.getElementById("pm10").textContent="pm10 = ".concat(r.data.iaqi.pm10.v," µg/m^3"),void 0===r.data.iaqi.pm25?(document.getElementById("pm25").textContent="pm25 = --",console.log("pm25 value not detected")):document.getElementById("pm25").textContent="pm25 = ".concat(r.data.iaqi.pm25.v," µg/m^3");case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)},e=function(t){return n.apply(this,arguments)},navigator.geolocation?navigator.geolocation.getCurrentPosition(e):alert("Geolocation is not supported by this browser");case 3:case"end":return t.stop()}}),t)}))));